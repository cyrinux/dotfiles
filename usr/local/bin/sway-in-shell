#!/bin/sh

# Import variables defined via environment.d.
# This is temporary until varctl if finalised.
# shellcheck disable=SC2046
export $(systemctl --user show-environment)

export GPG_TTY="$TTY"
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/gnupg/S.gpg-agent.ssh"
systemctl --user import-environment GPG_TTY SSH_AUTH_SOCK

systemd-cat --identifier sway /usr/bin/sway
systemctl --user start hyprland-session.target

systemctl --user stop graphical-session.target
systemctl --user unset-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
