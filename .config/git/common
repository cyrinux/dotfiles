[alias]
    alias = !git config --get-regexp '^alias\\.' | sed 's/alias\\.\\([^ ]*\\) \\(.*\\)/\\1\\\t => \\2/' | sort
    lgg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ci) %C(bold blue)<%an>%Creset' --abbrev-commit
    bdr = !git branch --merged | grep -E -v \"(main|master|dev)\" | xargs git branch -d
    pushall = !git remote | xargs -L1 -P0 git push --all --follow-tags
    branches = for-each-ref --sort=-committerdate --format=\"%(color:blue)%(authordate:relative)\t%(color:red)%(authorname)\t%(color:white)%(color:bold)%(refname:short)\" refs/remotes
    createmr = !git push -o merge_request.create
    createmrstaging = !git push -o merge_request.create -o merge_request.target=staging
    createmrskipci = !git push -o merge_request.create -o ci.skip
    fixup = "!git log -n 50 --pretty=format:'%h %s' --no-merges | fzf | cut -c -7 | xargs -o git commit -n --fixup"
    workflow = "!hub ci-status -v"
    fork = "!hub fork"
    last = for-each-ref --sort=-committerdate --count=20 --format='%(align:50,left)%(refname:short)%(end)%(committerdate:relative)' refs/heads/
    edit = "!sh -c \"exec kak $(git list $@ | tr '\n' ' ')\""
    who = shortlog -s --no-merges --
    whois = "!sh -c 'git log -i -1 --pretty=\"format:%an <%ae>\n\" --author=\"$1\"' -"
    whatis = show -s --pretty='tformat:%h (%s, %ad)' --date=short
    unstage = reset HEAD --
    review = push origin HEAD:refs/for/main
    td = log --stat --oneline --since='12 hour ago'
    ls = ls-files
    ci = "!browser $(hub ci-status -v | awk '{print $3}')"
    lab = !glab
	tree = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset%n' --abbrev-commit --date=relative --branches

[diff]
	tool = vimdiff
	algorithm = patience
	compactionHeuristic = true
	colorMoved = default

[branch]
    autosetuprebase = always

[init]
    templateDir = ~/.config/git/templates
    defaultBranch = main

[core]
    autocrlf = input
    excludesfile = ~/.config/git/ignore
    untrackedCache = true
    editor = kak

; [commit]
; template = ~/.config/git/message

[delta]
	commit-decoration-style = bold ol dim yellow
	features = line-numbers decorations
	file-decoration-style = brightyellow ul ol
	file-style = brightyellow
	hunk-header-decoration-style = purple box
	whitespace-error-style = 22 reverse
	hunk-header-style = file line-number syntax

[merge]
    tool = meld

[mergetool]
    keepBackup = false
    prompt = false

[diff "gpg"]
    binary = true
    textconv = gpg --decrypt --quiet --yes --compress-algo=none --no-encrypt-to --batch --use-agent

[push]
    default = current
    autoSetupRemote = true

[rebase]
    autoStash = true
    autosquash = true
    preserve = true
    stat = true

[merge]
    tool = meld

[mergetool "meld"]
    cmd = meld "$LOCAL" "$MERGED" "$REMOTE" --output "$MERGED" 2>/dev/null

[interactive]
	diffFilter = delta --relative-paths --line-numbers --color-only --features=interactive

[delta "interactive"]
	keep-plus-minus-markers = false

[pager]
	log = delta --relative-paths
	show = delta --relative-paths
	diff = delta --relative-paths
    reflog = delta --relative-paths

[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true

[user]
    useConfigOnly = true

[commit]
    gpgsign = true

[absorb]
    maxStack=50

[advice]
    detachedHead = false

[aurutils]
    rebase = true

[help]
	autocorrect = 20

[sendemail]
	annotate = yes

[tag]
	forceSignAnnotated = true

[fetch]
	prune = true

[credential "https://github.com"]
   helper =
   helper = !/usr/bin/gh auth git-credential
[credential "https://gist.github.com"]
   helper =
   helper = !/usr/bin/gh auth git-credential

# vim:ft=ini
