#!/bin/sh

vpn() {
    if [ -e "/sys/class/net/tun-prod" ] || (( $(nmcli connection show --active | grep -q bb41bc5d-f4e5-4e9f-8a80-dbbd55011dcd) )); then
        icon='ï™Š'
        class=on
    else
        icon=''
        class=off
    fi
    tooltip="Connected to production"
    printf '{"text": "%s", "tooltip": "%s", "class": "%s"}\n' "$icon" "$tooltip" "$class"
}

vpn

ip monitor link | while read -r line; do vpn; done
